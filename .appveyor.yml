version: 1.0.{build}

environment:
  nodejs_version: '18'

install:
  - ps: Install-Product node $env:nodejs_version
  - cd frontend
  - npm install
  - cd ../backend
  - npm install

build_script:
  - cd frontend
  - npm run build

artifacts:
  - path: frontend/dist
    name: dist

deploy:
  provider: GitHubPages
  auth_token:
    secure: ${env:GITHUB_TOKEN}
  repo: FilSado/helpdesk
  branch: gh-pages
  folder: dist
  message: 'Deploy from Appveyor build %APPVEYOR_BUILD_NUMBER%'

